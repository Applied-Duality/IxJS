(function(t,r){var n="object"==typeof exports&&exports&&("object"==typeof t&&t&&t==t.global&&(window=t),exports);"function"==typeof define&&define.amd?define(["Ix","exports"],function(n,e){return t.Ix=r(t,e,n),t.Ix}):"object"==typeof module&&module&&module.exports==n?module.exports=r(t,module.exports,require("./l2o")):t.Ix=r(t,{},t.Ix)})(this,function(t,r,n){function e(){}function u(t){return t}function o(t,r){return t>r?1:r>t?-1:0}function i(t,r){return t===r}function f(t,r){r||(r=i);for(var n=0,e=this.length;e>n;n++)if(r(t,this[n]))return n;return-1}function s(t,r,n){var e=[],u=t.getEnumerator();try{if(!u.moveNext())throw Error(m);var o=u.getCurrent(),i=r(o);for(e.push(o);u.moveNext();){var f=u.getCurrent(),s=r(f),c=n(s,i);0===c?e.push(f):c>0&&(e=[f],i=s)}}finally{u.dispose()}return w(e)}function c(t){this.readerCount=t,this.list={},this.length=0}function a(){this.list=[],this.length=0}function h(t,r){return function(){t.apply(r,arguments)}}function l(t,r){var n=this;return new d(function(){var e,u,o=t;return N(function(){if(u||(u=n.getEnumerator()),!u.moveNext())return!1;var t=u.getCurrent();return o=r(o,t),e=o,!0},function(){return e},function(){u&&u.dispose()})})}function p(t){var r=this;return new d(function(){var n,e,u,o=!1;return N(function(){for(e||(e=r.getEnumerator());;){if(!e.moveNext())return!1;var i=e.getCurrent();{if(o)return u=t(u,i),n=u,!0;o=!0,u=i}}},function(){return n},function(){e&&e.dispose()})})}function v(t,r){return new d(function(){var n,e,u;return N(function(){for(i||(i=t.getEnumerator());;){var e,o;try{e=i.moveNext(),o=i.getCurrent()}catch(i){u=r(i);break}if(!e)break;return n=o,!0}return u?u.moveNext()?(n=u.getCurrent(),!0):!1:undefined},function(){return n},function(){e.dispose(),u&&u.dispose()})})}var m="Sequence contains no elements.",g=Array.prototype.slice,d=n.Enumerable,y=d.prototype,E=d.concat,x=d.empty,w=d.fromArray,C=d.repeat,N=n.Enumerator.create;inherits=n.internals.inherits,y.isEmpty=function(){return!this.any()},y.min=function(t){return this.minBy(u,t).first()},y.minBy=function(t,r){return r||(r=o),s(this,t,function(t,n){return-r(t,n)})},y.max=function(t){if(t)return this.select(t).max();var r,n=!1,e=this.getEnumerator();try{for(;e.moveNext();){var u=e.getCurrent();n?u>r&&(r=u):(r=u,n=!0)}}finally{e.dispose()}if(!n)throw Error(m);return r},y.maxBy=function(t,r){return r||(r=o),s(this,t,r)};var b=function(){function t(t){this.disposed=!1,this.source=t}return inherits(t,d),t.prototype.getEnumerator=function(){if(this.disposed)throw Error("Object disposed");var t,r=this;return N(function(){return r.source.moveNext()?(t=r.source.getCurrent(),!0):!1},function(){return t})},t.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.source.dispose(),this.source=null)},t}();y.share=function(t){var r=this;return t?new d(function(){return t(r.share()).getEnumerator()}):new b(r.getEnumerator())};var k=c.prototype;k.clear=function(){this.list={},this.length=0},k.get=function(t){if(!this.list[t])throw Error("Element no longer available in the buffer.");var r=this.list[t];return 0===--r.length&&delete this.list[t],r.value},k.push=function(t){this.list[this.length]={value:t,length:this.readerCount},this.length++},k.done=function(t){for(var r=t;this.length>r;r++)this.get(r);this.readerCount--};var O=function(){function t(t){this.source=t,this.buffer=new c(0),this.disposed=!1,this.stopped=!1,this.error=null}function r(t){var r,n=this,e=!1,u=!0,o=!1;return N(function(){if(n.disposed)throw Error("Object disposed");u||t++;var i,f=!1;if(t>=n.buffer.length){if(!n.stopped)try{f=n.source.moveNext(),f&&(i=n.source.getCurrent())}catch(s){n.stopped=!0,n.error=s,n.source.dispose(),e=!0}if(n.stopped){if(n.error)throw n.buffer&&n.buffer.done(t+1),o=!0,n.error;return n.buffer&&n.buffer.done(t+1),o=!0,!1}f&&n.buffer.push(i)}else f=!0;return f?(r=n.buffer.get(t),u=!1,!0):(n.buffer&&n.buffer.done(t+1),o=!0,!1)},function(){return r},function(){o&&n.buffer&&n.buffer.done(t)})}return inherits(t,d),t.prototype.getEnumerator=function(){if(this.disposed)throw Error("Object disposed");var t=this.buffer.length;return this.buffer.readerCount++,r.call(this,t)},t.prototype.dispose=function(){this.disposed||(this.source.dispose(),this.source=null,this.buffer.clear(),this.buffer=null,this.disposed=!0)},t}();y.publish=function(t){var r=this;return t?new d(function(){return t(r.publish()).getEnumerator()}):new O(r.getEnumerator())};var j=a.prototype;j.done=e,j.push=function(t){this.list[this.length++]=t},j.clear=function(){this.list=[],this.length=0},j.get=function(t){return this.list[t]};var A=function(){function t(t,r){this.source=t,this.buffer=r,this.stopped=!1,this.error=null,this.disposed=!1}return inherits(t,d),t.prototype.getEnumerator=function(){if(this.disposed)throw Error("Object disposed");var t,r=0,n=this,e=!1,u=!0,o=!1;return N(function(){if(n.disposed)throw Error("Object disposed");u||r++;var i,f=!1;if(r>=n.buffer.length){if(!n.stopped)try{f=n.source.moveNext(),f&&(i=n.source.getCurrent())}catch(s){n.stopped=!0,n.error=s,n.source.dispose(),e=!0}if(n.stopped){if(n.error)throw n.buffer&&n.buffer.done(r+1),o=!0,n.error;return n.buffer&&n.buffer.done(r+1),o=!0,!1}f&&n.buffer.push(i)}else f=!0;return f?(t=n.buffer.get(r),u=!1,!0):(n.buffer&&n.buffer.done(r+1),o=!0,!1)},function(){return t},function(){o&&n.buffer&&n.buffer.done(r)})},t.prototype.dispose=function(){this.disposed||(this.source.dispose(),this.source=null,this.buffer.clear(),this.buffer=null,this.disposed=!0)},t}();y.memoize=function(){var t=this;return 0===arguments.length?new A(t.getEnumerator(),new a):1===arguments.length&&"function"==typeof arguments[0]?new d(function(){return arguments[1](t.memoize()).getEnumerator()}):1===arguments.length&&"number"==typeof arguments[0]?new A(t.getEnumerator(),new c(arguments[0])):new d(function(){return arguments[1](t.memoize(arguments[0])).getEnumerator()})},d.returnValue=function(t){return new d(function(){var r=!1;return N(function(){return r?!1:r=!0},function(){return t})})},d.throwException=function(t){return new d(function(){return N(function(){throw t},e)})};var S=d.defer=function(t){return new d(function(){var r;return N(function(){return r||(r=t().getEnumerator()),r.moveNext()},function(){return r.getCurrent()},function(){r.dispose()})})};d.generate=function(t,r,n,e){return new d(function(){var u,o,i=!1;return N(function(){if(i){if(u=n(u),!r(u))return!1}else u=t,i=!0;return o=e(u),!0},function(){return o})})},d.using=function(t,r){return new d(function(){var n,e,u,o=!0;return N(function(){return o&&(u=t(),e=r(u).getEnumerator(),o=!1),e.moveNext()?(n=e.getCurrent(),!0):!1},function(){return n},function(){e&&e.dispose(),u&&u.dispose()})})},y.doAction=function(t,r,n){var u,o,i,f=this;return"object"==typeof t?(u=h(t.onNext,t),o=h(t.onError,t),i=h(t.onCompleted,t)):(u=t,o=r||e,i=n||e),new d(function(){var t,r;return N(function(){t||(t=f.getEnumerator());try{if(!t.moveNext())return i(),!1;r=t.getCurrent()}catch(t){throw o(t),t}return u(r),!0},function(){return r},function(){t&&t.dispose()})})},y.bufferWithCount=function(t,r){var n=this;return null==r&&(r=t),new d(function(){var e,u,o=[],i=0;return N(function(){for(e||(e=n.getEnumerator());;){if(!e.moveNext())return o.length>0?(u=d.fromArray(o.shift()),!0):!1;0===i%r&&o.push([]);for(var f=0,s=o.length;s>f;f++)o[f].push(e.getCurrent());if(o.length>0&&o[0].length===t)return u=d.fromArray(o.shift()),++i,!0;++i}},function(){return u},function(){e.dispose()})})},y.ignoreElements=function(){var t=this;return new d(function(){var r;return N(function(){for(r=t.getEnumerator();r.moveNext(););return!1},function(){throw Error("Operation is not valid due to the current state of the object.")},function(){r.dispose()})})},y.distinctBy=function(t,r){r||(r=i);var n=this;return new d(function(){var e,u,o=[];return N(function(){for(u||(u=n.getEnumerator());;){if(!u.moveNext())return!1;var i=u.getCurrent(),s=t(i);if(-1===f.call(o,s,r))return o.push(i),e=i,!0}},function(){return e},function(){u&&u.dispose()})})},y.distinctUntilChanged=function(t,r){t||(t=u),r||(r=i);var n=this;return new d(function(){var e,u,o,i;return N(function(){for(u||(u=n.getEnumerator());;){if(!u.moveNext())return!1;var f=u.getCurrent(),s=t(f),c=!1;if(i&&(c=r(o,s)),!i||!c)return e=f,o=s,i=!0,!0}},function(){return e},function(){u&&u.dispose()})})},y.expand=function(t){var r=this;return new d(function(){var n,e,u=[r];return N(function(){for(;;){if(!e){if(0===u.length)return!1;e=u.shift().getEnumerator()}if(e.moveNext())return n=e.getCurrent(),u.push(t(n)),!0;e.dispose(),e=null}},function(){return n},function(){e&&e.dispose()})})},y.startWith=function(){return E(w(g.call(arguments)),this)},y.scan=function(){var t=1===arguments.length?p:l;return t.apply(this,arguments)},y.takeLast=function(t){var r=this;return new d(function(){var n,e,u;return N(function(){if(e||(e=r.getEnumerator()),!u)for(u=[];e.moveNext();)u.push(e.getCurrent()),u.length>t&&u.shift();return 0===u.length?!1:(n=u.shift(),!0)},function(){return n},function(){e&&e.dispose()})})},y.skipLast=function(t){var r=this;return new d(function(){var n,e,u=[];return N(function(){for(e||(e=r.getEnumerator());;){if(!e.moveNext())return!1;if(u.push(e.getCurrent()),u.length>t)return n=u.shift(),!0}},function(){return n},function(){e&&e.dispose()})})},y.repeat=function(t){var r=this;return C(0,t).selectMany(function(){return r})},y.catchException=function(t){return"function"===t?v(this,t):enumerableCatch(this,t)},d.catchException=function(){var t=arguments;return new d(function(){var r,n,e,u=0;return N(function(){if(t.length>u){for(i||(i=t[u++].getEnumerator());;){var n,o;try{n=i.moveNext(),o=i.getCurrent()}catch(i){e=i;break}if(!n){i.dipose(),i=null;break}return r=o,!0}if(!e)return!1}if(e)throw e;return!1},function(){return r},function(){n.dispose()})})},y.finallyDo=function(t){var r=this;return new d(function(){var n=r.getEnumerator();return N(function(){return n.moveNext()},function(){return n.getCurrent()},function(){n.dispose(),t()})})},y.onErrorResumeNext=function(t){return q.apply(null,[this,t])};var q=d.onErrorResumeNext=function(){var t=arguments;return new d(function(){var r,n,e=0;return N(function(){for(;t.length>e;){n||(n=t[e++].getEnumerator());try{var u=n.moveNext();if(u)return r=n.getCurrent(),!0}catch(o){}n.dispose(),n=null}return!1},function(){return r},function(){n&&n.dispose()})})};y.retry=function(t){var r=this;return new d(function(){var n,e,u=t;return null==u&&(u=-1),N(function(){for(t||(t=r.getEnumerator());;)try{return t.moveNext()?(n=t.getCurrent(),!0):!1}catch(t){if(0===u--)throw t}},function(){return n},function(){e.dispose()})})};var D=d.whileDo=function(t,r){return C(r).takeWhile(t).selectMany(u)};return d.ifThen=function(t,r,n){return n||(n=x()),S(function(){return t()?r:n})},d.doWhile=function(t,r){return t.concat(D(r,t))},d.cases=function(t,r,n){return n||(n=x()),S(function(){var e=r[t()];return e||(e=n),e})},d.forIn=function(t,r){return t.select(r)},n});