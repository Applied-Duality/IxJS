/*Copyright (c) Microsoft Open Technologies, Inc.  All rights reserved.
Microsoft Open Technologies would like to thank its contributors, a list.
of whom are at http://aspnetwebstack.codeplex.com/wikipage?title=Contributors..
Licensed under the Apache License, Version 2.0 (the "License"); you.
may not use this file except in compliance with the License. You may.
obtain a copy of the License at.

http://www.apache.org/licenses/LICENSE-2.0.

Unless required by applicable law or agreed to in writing, software.
distributed under the License is distributed on an "AS IS" BASIS,.
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or.
implied. See the License for the specific language governing permissions.
and limitations under the License..
*/
(function(e,t){function i(){}function s(e){return e}function o(e,t){return e>t?1:e<t?-1:0}function u(e,t){return e===t}function S(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function x(e,n,r){n===t&&r===t&&(n=0,r=e.length-1);var i=n,s=r;if(r-n>=1){var o=e[n];while(s>i){while(this.compareKeys(e[i],o)<=0&&i<=r&&s>i)i++;while(this.compareKeys(e[s],o)>0&&s>=n&&s>=i)s--;s>i&&S(e,i,s)}S(e,n,s),x.call(this,e,n,s-1),x.call(this,e,s+1,r)}}function T(e,t,n,r){this.keySelector=e,this.comparer=t,this.descending=n,this.next=r}var n=typeof exports=="object"&&exports&&(typeof global=="object"&&global&&global==global.global&&(e=global),exports),r={internals:{}},a="Sequence contains no elements.",f=Array.prototype.slice,l={}.hasOwnProperty,c=r.internals.inherits=function(e,t){function r(){this.constructor=e}for(var n in t)n!=="prototype"&&l.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.super_=t.prototype,e},h=r.Enumerator=function(e,t,n){this.moveNext=e,this.getCurrent=t,this.dispose=n},p=h.create=function(e,t,n){var r=!1;return n||(n=i),new h(function(){if(r)return!1;var t=e();return t||(r=!0,n()),t},function(){return t()},function(){r||(n(),r=!0)})},d=r.Enumerable=function(){function e(e){this.getEnumerator=e}function n(e,t,n){n||(n=s);var r=e,i=this.getEnumerator();try{while(i.moveNext())r=t(r,i.getCurrent())}finally{i.dispose()}return n?n(r):r}function r(e){var t,n=this.getEnumerator();try{if(!n.moveNext())throw new Error(a);t=n.getCurrent();while(n.moveNext())t=e(t,n.getCurrent())}finally{n.dispose()}return t}function i(e,t){t||(t=o);var n=this.length;while(n--)if(t(this[n],e))return n;return-1}function l(e,t){var n=i.call(this,e,t);return n===-1?!1:(this.splice(n,1),!0)}var t=e.prototype;return t.aggregate=function(){var e=arguments.length===1?r:n;return e.apply(this,arguments)},t.all=function(e){var t=this.getEnumerator();try{while(t.moveNext())if(!e(t.getCurrent()))return!1}finally{t.dispose()}return!0},t.any=function(e){var t=this.getEnumerator();try{while(t.moveNext())if(!e||e(t.getCurrent()))return!0}finally{t.dispose()}return!1},t.average=function(e){if(e)return this.select(e).average();var t=this.getEnumerator(),n=0,r=0;try{while(t.moveNext())n++,r+=t.getCurrent()}finally{t.dispose()}if(n===0)throw new Error(a);return r/n},t.concat=function(){var e=f.call(arguments,0);return e.unshift(this),v.apply(null,e)},t.contains=function(e,t){t||(t=u);var n=this.getEnumerator();try{while(n.moveNext())if(t(e,n.getCurrent()))return!0}finally{n.dispose()}return!1},t.count=function(e){var t=0,n=this.getEnumerator();try{while(n.moveNext())(!e||e(n.getCurrent()))&&t++}finally{n.dispose()}return t},t.defaultIfEmpty=function(t){var n=this;return new e(function(){var e,r=!1,i;return p(function(){return i||(i=n.getEnumerator()),i.moveNext()?(r=!0,e=i.getCurrent(),!0):!1},function(){return r?e:t},function(){i.dispose()})})},t.distinct=function(t){t||(t=u);var n=this;return e(function(){var e,r=[],s;return p(function(){s||(s=n.getEnumerator());for(;;){if(!s.moveNext())return!1;e=s.getCurrent();if(i.call(r,e,t)===-1)return r.push(e),!0}},function(){return e},function(){s.dispose()})})},t.elementAt=function(e){return this.skip(e).first()},t.elementAtOrDefault=function(e){return this.skip(e).firstOrDefault()},t.except=function(t,n){n||(n=u);var r=this;return new e(function(){var e,s=[],o=r.getEnumerator(),u;while(o.moveNext())s.push(o.getCurrent());return p(function(){u||(u=t.getEnumerator());for(;;){if(!u.moveNext())return!1;e=u.getCurrent();if(i.call(s,e,n)===-1)return s.push(e),!0}},function(){return e},function(){enumerator.dispose()})})},t.first=function(e){var t=this.getEnumerator();try{while(t.moveNext()){var n=t.getCurrent();if(!e||e(n))return n}}finally{t.dispose()}throw new Error(a)},t.firstOrDefault=function(e){var t=this.getEnumerator();try{while(t.moveNext()){var n=t.getCurrent();if(!e||e(n))return n}}finally{t.dispose()}return null},t.forEach=function(e){var t=this.getEnumerator(),n=0;try{while(t.moveNext())e(t.getCurrent(),n++)}finally{t.dispose()}},t.groupBy=function(t,n,r,i){n||(n=s),i||(i=defaultSerializer);var o=this;return new e(function(){var e={},s=[],u=0,a,f,l=o.getEnumerator(),c,h,d,v;while(l.moveNext())c=l.getCurrent(),h=t(c),d=i(h),e[d]||(e[d]=[],s.push(d)),v=n(c),e[d].push(v);return p(function(){var t;return u<s.length?(f=s[u++],t=y(e[f]),r?a=r(f,t):(t.key=f,a=t),!0):!1},function(){return a})})},t.intersect=function(t,n){n||(n=u);var r=this;return new e(function(){var e,i=[],s=r.getEnumerator(),o;while(s.moveNext())i.push(s.getCurrent());return p(function(){o||(o=t.getEnumerator());for(;;){if(!o.moveNext())return!1;e=o.getCurrent();if(l.call(i,e,n))return!0}},function(){return e},function(){enumerator.dispose()})})},t.last=function(e){var t=!1,n,r=this.getEnumerator();try{while(r.moveNext()){var i=r.getCurrent();if(!e||e(i))t=!0,n=i}}finally{r.dispose()}if(t)return n;throw new Error(a)},t.lastOrDefault=function(e){var t=!1,n,r=this.getEnumerator();try{while(r.moveNext()){var i=r.getCurrent();if(!e||e(i))t=!0,n=i}}finally{r.dispose()}return t?n:null},t.max=function(e){if(e)return this.select(e).max();var t,n=!1,r=this.getEnumerator();try{while(r.moveNext()){var i=r.getCurrent();n?i>t&&(t=i):(t=i,n=!0)}}finally{r.dispose()}if(!n)throw new Error(a);return t},t.min=function(e){if(e)return this.select(e).min();var t,n=!1,r=this.getEnumerator();try{while(r.moveNext()){var i=r.getCurrent();n?i<t&&(t=i):(t=i,n=!0)}}finally{r.dispose()}if(!n)throw new Error(a);return t},t.orderBy=function(e,t){return new N(this,e,t,!1)},t.orderByDescending=function(e,t){return new N(this,e,t,!0)},t.reverse=function(){var e=[],t=this.getEnumerator();try{while(t.moveNext())e.unshift(t.getCurrent())}finally{t.dispose()}return y(e)},t.select=function(t){var n=this;return new e(function(){var e,r=0,i;return p(function(){return i||(i=n.getEnumerator()),i.moveNext()?(e=t(i.getCurrent(),r++),!0):!1},function(){return e},function(){i.dispose()})})},t.selectMany=function(t,n){var r=this;return new e(function(){var e,i=0,s,o;return p(function(){s||(s=r.getEnumerator());for(;;){if(!o){if(!s.moveNext())return!1;o=t(s.getCurrent()).getEnumerator()}if(o.moveNext()){e=o.getCurrent();if(n){var i=s.getCurrent();e=n(i,e)}return!0}o.dispose(),o=null}},function(){return e},function(){o&&o.dispose(),s.dispose()})})},e.sequenceEqual=function(e,t,n){return e.sequenceEqual(t,n)},t.sequenceEqual=function(e,t){t||(t=u);var n=this.getEnumerator(),r=e.getEnumerator();try{while(n.moveNext())if(!r.moveNext()||!t(n.getCurrent(),r.getCurrent()))return!1;return r.moveNext()?!1:!0}finally{n.dispose(),r.dispose()}},t.single=function(e){if(e)return this.where(e).single();var t=this.getEnumerator();try{while(t.moveNext()){var n=t.getCurrent();if(t.moveNext())throw new Error(invalidOperation);return n}}finally{t.dispose()}throw new Error(a)},t.singleOrDefault=function(e){if(e)return this.where(e).single();var t=this.getEnumerator();try{while(t.moveNext()){var n=t.getCurrent();if(t.moveNext())throw new Error(invalidOperation);return n}}finally{t.dispose()}return null},t.skip=function(t){var n=this;return new e(function(){var e,r=!1,i;return p(function(){i||(i=n.getEnumerator());if(!r){for(var s=0;s<t;s++)if(!i.moveNext())return!1;r=!0}return i.moveNext()?(e=i.getCurrent(),!0):!1},function(){return e},function(){i.dispose()})})},t.skipWhile=function(t){var n=this;return new e(function(){var e,r=!1,i;return p(function(){i||(i=n.getEnumerator());if(!r){for(;;){if(!i.moveNext())return!1;if(!t(i.getCurrent()))return e=i.getCurrent(),!0}r=!0}return i.moveNext()?(e=i.getCurrent(),!0):!1},function(){return e},function(){i.dispose()})})},t.sum=function(e){if(e)return this.select(e).sum();var t=0,n=this.getEnumerator();try{while(n.moveNext())t+=n.getCurrent()}finally{n.dispose()}return t},t.take=function(t){var n=this;return new e(function(){var e,r,i=t;return p(function(){return r||(r=n.getEnumerator()),i===0?!1:r.moveNext()?(i--,e=r.getCurrent(),!0):(i=0,!1)},function(){return e},function(){r.dispose()})})},t.takeWhile=function(t){var n=this;return new e(function(){var e,r=0,i;return p(function(){return i||(i=n.getEnumerator()),i.moveNext()?(e=i.getCurrent(),t(e,r++)?!0:!1):!1},function(){return e},function(){i.dispose()})})},t.toArray=function(){var e=[],t=this.getEnumerator();try{while(t.moveNext())e.push(t.getCurrent());return e}finally{t.dispose()}},t.where=function(t){var n=this;return new e(function(){var e,r=0,i;return p(function(){i||(i=n.getEnumerator());for(;;){if(!i.moveNext())return!1;e=i.getCurrent();if(t(e,r++))return!0}},function(){return e},function(){i.dispose()})})},t.union=function(e,t){t||(t=u);var n=this;return m(function(){var r,s,o=[],u=!1,a=!1;return p(function(){for(;;){if(!s){if(a)return!1;u?(s=e.getEnumerator(),a=!0):(s=n.getEnumerator(),u=!0)}if(s.moveNext()){r=s.getCurrent();if(i.call(o,r,t)===-1)return o.push(r),!0}else s.dispose(),s=null}},function(){return r},function(){s&&s.dispose()})})},t.zip=function(t,n){var r=this;return new e(function(){var e,i,s;return p(function(){return!e&&!i&&(e=r.getEnumerator(),i=t.getEnumerator()),e.moveNext()&&i.moveNext()?(s=n(e.getCurrent(),i.getCurrent()),!0):!1},function(){return s},function(){e.dispose(),i.dispose()})})},e}(),v=d.concat=function(){return y(arguments).selectMany(s)},m=d.create=function(e){return new d(e)},g=d.empty=function(){return new d(function(){return p(function(){return!1},function(){throw new Error(a)})})},y=d.fromArray=function(e){return new d(function(){var t=0,n;return p(function(){return t<e.length?(n=e[t++],!0):!1},function(){return n})})},b=d.returnValue=function(e){return new d(function(){var t=!1;return p(function(){return t?!1:(t=!0,!0)},function(){return e})})},w=d.range=function(e,t){return new d(function(){var n=e-1,r=e+t-1;return p(function(){return n<r?(n++,!0):!1},function(){return n})})},E=d.repeat=function(e,n){return new d(function(){var r=n;return r===t&&(r=-1),p(function(){return r!==0?(r--,!0):!1},function(){return e})})};T.prototype={computeKeys:function(e,t){this.keys=new Array(t);for(var n=0;n<t;n++)this.keys[n]=this.keySelector(e[n]);this.next&&this.next.computeKeys(e,t)},compareKeys:function(e,t){var n=this.comparer(this.keys[e],this.keys[t]);return n===0?this.next?this.next.compareKeys(e,t):e-t:this.descending?-n:n},sort:function(e,t){this.computeKeys(e,t);var n=new Array(t);for(var r=0;r<t;r++)n[r]=r;return x.call(this,n,0,t-1),n}};var N=function(){function e(e,t,n,r){this.source=e,this.keySelector=t||s,this.comparer=n||o,this.descending=r}c(e,d);var t=e.prototype;return t.getEnumerableSorter=function(e){var t=new T(this.keySelector,this.comparer,this.descending,e);return this.parent&&(t=this.parent.getEnumerableSorter(t)),t},t.createOrderedEnumerable=function(t,n,r){var i=new e(this.source,t,n,r);return i.parent=this,i},t.getEnumerator=function(){var e=this.source.toArray(),t=e.length,n=this.getEnumerableSorter(),r=n.sort(e,t),i=0,s;return p(function(){return i<t?(s=e[r[i++]],!0):!1},function(){return s})},t.thenBy=function(t,n){return new e(this,t,n,!1)},t.thenByDescending=function(t,n){return new e(this,t,n,!0)},e}();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd)return e.Ix=r,define(function(){return r});n?typeof module=="object"&&module&&module.exports==n?module.exports=r:n=r:e.Ix=r})(this);